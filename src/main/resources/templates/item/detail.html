<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout/main :: layout(~{::section})}">

<section>

    <div class="mb-4">
        <h2 class="mb-1">商品資料</h2>
        <p class="text-muted mb-0">
            <span th:text="${item.itemId()}"></span>
            <span> – </span>
            <span th:text="${item.name()}"></span>
        </p>
    </div>

    <div class="row">
        <!-- 基本資訊 -->
        <div class="col-md-6 mb-3">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">基本資訊</h5>
                    <dl class="row mb-0">
                        <dt class="col-sm-4">商品編號</dt>
                        <dd class="col-sm-8" th:text="${item.itemId()}"></dd>

                        <dt class="col-sm-4">SKU</dt>
                        <dd class="col-sm-8" th:text="${item.sku()}"></dd>

                        <dt class="col-sm-4">品名</dt>
                        <dd class="col-sm-8" th:text="${item.name()}"></dd>

                        <dt class="col-sm-4">酒類型</dt>
                        <dd class="col-sm-8" th:text="${item.wineType()}"></dd>

                        <dt class="col-sm-4">產地</dt>
                        <dd class="col-sm-8" th:text="${item.originCountry()}"></dd>

                        <dt class="col-sm-4">年份</dt>
                        <dd class="col-sm-8" th:text="${item.vintage()}"></dd>

                        <dt class="col-sm-4">容量(ml)</dt>
                        <dd class="col-sm-8" th:text="${item.volumeMl()}"></dd>
                    </dl>
                </div>
            </div>
        </div>

        <!-- 庫存 / 狀態 -->
        <div class="col-md-6 mb-3">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">庫存與狀態</h5>
                    <dl class="row mb-0">
                        <dt class="col-sm-4">目前庫存</dt>
                        <dd class="col-sm-8" th:text="${item.stock()}"></dd>

                        <dt class="col-sm-4">啟用狀態</dt>
                        <dd class="col-sm-8">
                            <span th:text="${item.enabled()} ? '啟用' : '停用'"></span>
                            <div sec:authorize="hasAnyRole('ADMIN', 'MANAGER')" class="mt-3">
                                <form th:action="@{/items/{id}/status(id=${item.itemId()})}"
                                      method="post" class="d-inline">
                                    
                                    <button type="submit"
                                            class="btn"
                                            th:classappend="${item.enabled()} ? 'btn-outline-danger' : 'btn-outline-success'"
                                            th:text="${item.enabled()} ? '停用' : '啟用'">
                                        停用
                                    </button>
                                </form>
                            </div>    
                        </dd>

                        <dt class="col-sm-4">廠商編號</dt>
                        <dd class="col-sm-8" th:text="${item.supplierId()}"></dd>

                        <dt class="col-sm-4">建立者</dt>
                        <dd class="col-sm-8" th:text="${item.createdBy()}"></dd>

                        <dt class="col-sm-4">最後更新者</dt>
                        <dd class="col-sm-8" th:text="${item.updatedBy()}"></dd>
                    </dl>

                <div class=" justify-content gap-2">
                    <a class="btn btn-outline-primary mt-3" th:href="@{/items/{itemId}/edit(itemId=${item.itemId})}"
                        sec:authorize="hasAnyRole('MANAGER', 'OPERATOR')">
                        編輯
                    </a>
                    <a class="btn btn-outline-secondary mt-3" th:href="@{/items}">
                        返回
                    </a>
                </div>
                    
                </div>
            </div>
        </div>
    </div>

</section>

</html>